# 远程升级

McPatch客户端会不定期发布新的版本。但升级客户端不像升级管理端那样方便，因为客户端在玩家电脑上，升级需要重新发包，比较麻烦

远程升级就是用来解决这个问题的，通过使用动态加载器启动McPatch客户端后，McPatch客户端就可以间接地自己更新自己了。或者说叫热更新

### 兼容性

动态加载器目前支持全平台的所有Minecraft版本，但最低需要Java 8才能运行

动态加载器目前支持McPatch客户端全版本

### 动态加载器安装教程

1. 下载动态加载器DynamicLoader的文件（版本选择最新版即可）
2. 把动态加载器文件放到McPatch客户端旁边去，一定要放到一起否则会找不到文件
3. 双击运行动态加载器，然后会提示***mc-patch-dynamic-loader.txt 文件为空，无法启动***。这是正常情况，先点击确定关闭
4. 打开`mc-patch-dynamic-loader.txt`文件
5. 将McPatch客户端的实际文件名写入进去，然后保存关闭
6. 再次运行动态加载器，发现McPatch客户端可以启动了
7. 修改JVM参数（也叫Java虚拟机参数），将原先McPatch客户端的文件名换成动态加载器的文件名（仅替换文件名，其它不动）
8. 从Minecraft启动器启动游戏，如果McPatch客户端运行起来了，说明配置无误，可以继续进行后面的步骤

### 远程升级教程

当需要为客户端远程升级新版本的McPatch客户端时，可以安装下面的步骤来

1. 将客户端的`mc-patch-dynamic-loader.txt`文件复制到工作空间目录的对应位置以加入更新（所谓对应位置就是指在工作空间里的位置要能和客户端那边的实际位置对应的位置，这样才能精准地覆盖掉客户端的文件）
2. 将新版的McPatch客户端文件也放入工作空间目录，位置就在`mc-patch-dynamic-loader.txt`文件的旁边紧挨着
3. 打开`mc-patch-dynamic-loader.txt`文件，先清空内容，然后将新版的McPatch客户端文件名粘贴进去保存关闭
4. 创建一个新的版本，然后分发给玩家即可

### 注意事项

目前远程升级新版本之后，需要第二次启动的时候才会生效（指从新版本启动），这是一个很小的细节，但是必须要提一下

做远程升级的时候，务必保证`mc-patch-dynamic-loader.txt`文件的内容填写正确，因为万一这个文件内容填写错误。会导致找不到对应文件，客户端就再也没法启动了，游戏也没法启动了，也就意味着这个客户端废掉了，要重新下载

`mc-patch-dynamic-loader.txt`文件有一个机制，读取的时候会分别读取每一行的文件名，然后从开头往末尾挨个寻找文件名存在的文件进行执行。所以如果你不放心文件名是否填写正确，做升级的时候可以不删除原有内容，而是在开头新加一行，将新版客户端的文件名写到第一行上。这样当第一行的文件名找不到的时候，会自动执行第二行的文件名，也就是旧版本

